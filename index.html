<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>WAREHOUSE RAPIDO ASIA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">

<style>
:root{
  --input-h: clamp(32px, 6vw, 40px);
  --font-sm: clamp(12px, 3.2vw, 14px);
  --font-xs: clamp(11px, 3vw, 13px);
}
body{background:#22c7fe;font-size:var(--font-sm);}
.app-header{background:linear-gradient(135deg,#ff1a1a,#ff0000),
radial-gradient(circle at top right,rgba(255,255,255,.35),transparent 60%);
color:#fff;border-radius:18px;padding:18px;margin-bottom:16px;}
.header-inner{display:flex;align-items:center;gap:14px;}
.header-logo{background:#fff;padding:8px 12px;border-radius:14px;}
.header-logo img{height:42px;max-width:130px;}
.card-box{background:#aa9bea;border-radius:14px;padding:14px;margin-bottom:14px;}
.label{font-size:var(--font-xs);}
.input,.select,.select select,.textarea{width:100%;height:var(--input-h);}
.textarea{min-height:80px;}
.grid-2{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px;}
.grid-1{margin-top:10px;}
.time-item{background:#8aca3b;border-radius:12px;padding:6px;}
.button.is-large{height:48px;border-radius:14px;}
.header-center{text-align:center;flex-direction:column;}
</style>
</head>

<body class="p-2">
<div class="container" style="max-width:1100px">

<!-- HEADER -->
<div class="app-header">
  <div class="header-inner header-center">
    <div class="header-logo">
      <img src="https://drive.google.com/thumbnail?id=12ye0HEGRTrKu57KVf05AV04ZdmMtN541&sz=w800">
    </div>
    <h1 class="title is-5 has-text-white">WAREHOUSE RAPIDO ASIA</h1>
    <p class="is-size-7">Leadtime - Inbound - Outbound</p>
  </div>
</div>

<form id="truckForm">

<!-- üöõ TH√îNG TIN XE -->
<div class="card-box">
<p class="has-text-weight-semibold">üöõ TH√îNG TIN XE</p>
<div class="grid-2">
  <input class="input" name="bien_so_xe" placeholder="Bi·ªÉn s·ªë xe *" required>
  <div class="select is-fullwidth">
    <select name="ncc" required>
      <option value="">Nh√† cung c·∫•p *</option>
      <option>Q2C</option>
      <option>S∆°n H√πng</option>
      <option>VT89</option>
      <option>Ti·∫øn L·ª£i</option>
      <option>CBT</option>
      <option>KH T·ª± l·∫•y</option>
      <option>ƒê∆°n v·ªã kh√°c</option>
      <option>NCC ƒë·∫øn giao</option>
    </select>
  </div>
</div>

<div class="grid-2 mt-2">
  <div class="select is-fullwidth">
    <select name="loai_hang" required>
      <option value="">Lo·∫°i h√†ng *</option>
      <option>Th√†nh ph·∫©m</option><option>Nguy√™n v·∫≠t li·ªáu</option>
    </select>
  </div>
  <div class="select is-fullwidth">
    <select name="loai_yeu_cau" required>
      <option value="">Lo·∫°i y√™u c·∫ßu *</option>
      <option>Nh·∫≠p kho</option><option>Xu·∫•t kho</option>
    </select>
  </div>
</div>

<div class="grid-1">
  <div class="select is-fullwidth">
    <select name="kho_hang" required>
      <option value="">Kho h√†ng *</option>
      <option>Kho th√†nh ph·∫©m 1</option>
      <option>Kho th√†nh ph·∫©m 2</option>
      <option>Kho nguy√™n li·ªáu chung</option>
    </select>
  </div>
</div>

<div class="grid-2 mt-2">
  <div class="select is-fullwidth">
    <select name="loai_xe" required>
      <option value="">Lo·∫°i xe *</option>
      <option>Xe t·∫£i</option><option>Container</option><option>Xe m√°y</option>
    </select>
  </div>
  <div class="select is-fullwidth">
    <select name="tai_trong" required>
      <option value="">T·∫£i tr·ªçng *</option>
      <option>1.4T</option><option>2T</option><option>2.5T</option>
      <option>3.5T</option><option>5T</option><option>7T</option>
      <option>8T</option><option>9T</option>
      <option>Cont 20</option><option>Cont 40</option>
    </select>
  </div>
</div>
</div>

<!-- ‚è± TIMELINE -->
<div class="card-box">
<p class="has-text-weight-semibold">‚è± TIMELINE</p>
<div class="time-item"><label>Xe v√†o c·ªïng</label><input type="datetime-local" class="input" name="vao_cong"></div>
<div class="grid-2 mt-2">
  <div class="time-item"><label>Bƒê chu·∫©n b·ªã</label><input type="datetime-local" class="input" name="bat_dau_chuan_bi"></div>
  <div class="time-item"><label>KT chu·∫©n b·ªã</label><input type="datetime-local" class="input" name="ket_thuc_chuan_bi"></div>
</div>
<div class="grid-2 mt-2">
  <div class="time-item"><label>Bƒê qu√©t</label><input type="datetime-local" class="input" name="bat_dau_quet"></div>
  <div class="time-item"><label>KT qu√©t</label><input type="datetime-local" class="input" name="ket_thuc_quet"></div>
</div>
<div class="grid-2 mt-2">
  <div class="time-item"><label>Bƒê b·ªëc</label><input type="datetime-local" class="input" name="bat_dau_boc"></div>
  <div class="time-item"><label>KT b·ªëc</label><input type="datetime-local" class="input" name="ket_thuc_boc"></div>
</div>
<div class="time-item mt-2"><label>Xe ra c·ªïng</label><input type="datetime-local" class="input" name="ra_cong"></div>
</div>

<!-- üë∑ NH√ÇN L·ª∞C -->
<div class="card-box">
<p class="has-text-weight-semibold">üë∑ NH√ÇN L·ª∞C</p>
<div class="grid-2">
  <div class="select is-fullwidth">
    <select name="nhan_luc" required>
      <option value="">H√¨nh th·ª©c *</option>
      <option>T·ª± b·ªëc</option><option>B·ªëc x·∫øp ngo√†i</option>
    </select>
  </div>
  <div class="select is-fullwidth">
    <select name="so_luong">
      <option value="1">1 ng∆∞·ªùi</option>
      <option value="2">2 ng∆∞·ªùi</option>
      <option value="3">3 ng∆∞·ªùi</option>
      <option value="4">4 ng∆∞·ªùi</option>
      <option value="5">5 ng∆∞·ªùi</option>
    </select>
  </div>
</div>
<textarea class="textarea mt-2" name="ghi_chu" placeholder="Ghi ch√∫"></textarea>
</div>

<!-- üìé CH·ª®NG T·ª™ -->
<div class="card-box">
<p class="has-text-weight-semibold">üìé CH·ª®NG T·ª™</p>
<div class="file is-boxed is-fullwidth">
<label class="file-label">
<input class="file-input" type="file" name="chung_tu" accept="image/*" capture="environment">
<span class="file-cta">üì∑ Ch·ª•p ·∫£nh / ch·ªçn ·∫£nh</span>
</label>
</div>
</div>

<button class="button is-primary is-large is-fullwidth">üöö G·ª¨I D·ªÆ LI·ªÜU</button>
<p id="status" class="has-text-centered mt-2"></p>
</form>
</div>

<script>
const WEB_APP_URL="https://script.google.com/macros/s/AKfycbyLMzP3sTmgZ3Lb9yJg9aiCKnWtqbkEEukdMuaFbRcPEp-iPXvT258IXIgLgrLQ7x_kQw/exec";

function now(){return new Date().toISOString().slice(0,16);}
document.querySelectorAll('input[type="datetime-local"]').forEach(i=>{
  i.addEventListener("focus",()=>{if(!i.value)i.value=now();});
});

document.getElementById("truckForm").addEventListener("submit",e=>{
  e.preventDefault();
  const status=document.getElementById("status");
  status.innerText="‚è≥ ƒêang g·ª≠i...";
  const form=e.target;
  const fd=new FormData(form);

  const file=form.querySelector('[name="chung_tu"]');
  if(file.files.length){
    const r=new FileReader();
    r.onload=()=>{fd.set("chung_tu",r.result.split(",")[1]);send(fd);}
    r.readAsDataURL(file.files[0]);
  }else{
    fd.set("chung_tu","");
    send(fd);
  }

  function send(data){
    fetch(WEB_APP_URL,{method:"POST",body:data})
    .then(r=>r.text())
    .then(t=>{status.innerText=t;form.reset();})
    .catch(err=>status.innerText="‚ùå "+err);
  }
});
</script>

<script>
const loaiXe = document.querySelector('select[name="loai_xe"]');
const loaiYeuCau = document.querySelector('select[name="loai_yeu_cau"]');
const taiTrong = document.querySelector('select[name="tai_trong"]');

// timeline groups
const chuanBi = [
  'bat_dau_chuan_bi',
  'ket_thuc_chuan_bi'
];

const quet = [
  'bat_dau_quet',
  'ket_thuc_quet'
];

const boc = [
  'bat_dau_boc',
  'ket_thuc_boc'
];

// nh√¢n l·ª±c
const nhanLuc = document.querySelector('select[name="nhan_luc"]');
const soLuong = document.querySelector('select[name="so_luong"]');

function setInput(name, { disabled, required }) {
  const el = document.querySelector(`input[name="${name}"]`);
  if (!el) return;
  el.disabled = disabled;
  el.required = required;
  if (disabled) el.value = "";
}

function toggleXe() {
  const isXeMay = loaiXe.value === "Xe m√°y";
  const isNhapKho = loaiYeuCau.value === "Nh·∫≠p kho";

  /* ======================
     1Ô∏è‚É£ CHU·∫®N B·ªä + QU√âT
     ∆ØU TI√äN NH·∫¨P KHO
  ====================== */
  if (isNhapKho) {
    // Nh·∫≠p kho ‚Üí KH√ìA C·ª®NG
    [...chuanBi, ...quet].forEach(name => {
      setInput(name, { disabled: true, required: false });
    });
  } else {
    // Xu·∫•t kho ‚Üí theo lo·∫°i xe
    [...chuanBi, ...quet].forEach(name => {
      setInput(name, { disabled: isXeMay, required: !isXeMay });
    });
  }

 /* ======================
   2Ô∏è‚É£ B·ªêC
   - Nh·∫≠p kho + Xe m√°y ‚Üí KH√îNG C·∫¶N
   - Nh·∫≠p kho + Xe t·∫£i / cont ‚Üí C·∫¶N
   - Xu·∫•t kho + xe m√°y ‚Üí KH√îNG C·∫¶N
   - Xu·∫•t kho + xe t·∫£i / cont ‚Üí C·∫¶N
====================== */
if (isXeMay) {
  boc.forEach(name => {
    setInput(name, { disabled: true, required: false });
  });
} else {
  boc.forEach(name => {
    setInput(name, { disabled: false, required: true });
  });
}

  /* ======================
     3Ô∏è‚É£ NH√ÇN L·ª∞C + T·∫¢I TR·ªåNG
  ====================== */
  if (nhanLuc) {
    nhanLuc.disabled = isXeMay;
    nhanLuc.required = !isXeMay;
    if (isXeMay) nhanLuc.value = "";
  }

  if (soLuong) {
    soLuong.disabled = isXeMay;
    soLuong.required = !isXeMay;
    if (isXeMay) soLuong.value = "";
  }

  if (taiTrong) {
    taiTrong.disabled = isXeMay;
    taiTrong.required = !isXeMay;
    if (isXeMay) taiTrong.value = "";
  }
}

loaiXe.addEventListener("change", toggleXe);
loaiYeuCau.addEventListener("change", toggleXe);

// ch·∫°y l·∫ßn ƒë·∫ßu
toggleXe();
</script>


</body>
</html>

